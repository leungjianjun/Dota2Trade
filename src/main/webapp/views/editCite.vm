<!doctype html>
<head>
    <meta charset="utf-8">
    <title>编辑引用关系</title>
    <link rel="stylesheet" media="screen" href="../resources/css/sidebar.css"></link>
    <link rel="stylesheet" media="screen" href="../resources/css/global.css"></link>
    <link rel="stylesheet" media="screen" href="../resources/css/header.css"></link>
    <link rel="stylesheet" media="screen" href="../resources/css/editCite.css"></link>

    <!-- Bootstrap -->
    <link href="../resources/common/bootstrap/css/bootstrap.css" rel="stylesheet" />
    <link href="../resources/common/bootstrap/css/responsive.css" rel="stylesheet" />
    <link href="../resources/common/bootstrap/extend/bootstrap-select/bootstrap-select.css" rel="stylesheet" />
    <!-- JQueryUI -->
    <link href="../resources/common/theme/scripts/plugins/system/jquery-ui/css/smoothness/jquery-ui-1.9.2.custom.min.css" rel="stylesheet" />
    <!-- Main Theme Stylesheet :: CSS -->
    <link href="../resources/common/theme/css/style-light.css?1369753442" rel="stylesheet" />
    <!-- Uniform Pretty Checkboxes -->
    <link href="../resources/common/theme/scripts/plugins/forms/pixelmatrix-uniform/css/uniform.default.css" rel="stylesheet" />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.js"></script>
</head>
<body>
    #include("header.vm")
<div class="container0 clearfix">
    <ul class="menu">
        <li><a class="group" href="/index.html"><i></i><span>小组状态</span></a></li>
        <li><a class="search" href="/searchLiterature.html"><i></i><span>文献查询</span></a></li>
        <li><a class="add" href="/addLiterature.html"><i></i><span>文献录入</span></a></li>
        <li class="active"><a class="modify" href="/listLiterature.html"><i></i><span>文献修改</span></a></li>
        <li><a class="info" href="/profile.html"><i></i><span>个人信息</span></a></li>
    </ul>
    <div class="edit_right">
        <form name="cite" action="addCite" method="POST">
        <div class="title">文献修改<span>编辑引用关系</span></div>
        <div class="main clearfix">
            <div class="e_left">
                <div class="widget-body collapse in">
                    <div class="input-append">
                        <input class="span6" id="appendedInputButtons" type="text" placeholder="查找已有文献">
                        <button class="btn btn-default" type="button"><i class="icon-search"></i></button>
                    </div>
                </div>
                <div style="font-weight: bold;font-size: 14px;">可能相关的文献：</div>
                <div class="cite_type"><span>添加引用</span></div>
                <ul>
                    #foreach($literatureMeta in $literatureMetaList)
                        <li>
                            <a class="desc" href="literatureDetail.html?id=$literatureMeta.literatureid">$literatureMeta.title -$literatureMeta.author $literatureMeta.published_year</a>
                            <a class="add_cite" href="javascript:void(0)" onclick="add_cite('cite',this,$literatureMeta.literatureid)"></a>
                        </li>
                    #end
                </ul>
            </div>
            <div class="e_right">
                <div class="lit_title">文献标题: ${literature.literatureMeta.title}</div>
                <div class="cite_list">
                    <div class="list_title"><span></span>本文引用的文献</div>
                    <ul id="cite">
                            #if($citeList.size()==0)
                                <li style="display: block;" id="nonecite">暂无引用文献</li>
                            #end
                            #set($i=0)
                            #foreach($cite in $citeList)$i++
                            <li>
                                <a href="literatureDetail.html?id=cite.literatureid">云计算给图书馆管理带来挑战[J] 胡小菁， 范并思</a>
                                <div class="widget-body uniformjs">
                                    <input name="cite$i" type="hidden" value="$cite.literatureid">
                                    <label>引用关系类型：</label>
                                    <label class="checkbox">
                                        <input type="checkbox" name="type$i" class="checkbox" value="1" />
                                        简单提及
                                    </label>
                                    <label class="checkbox">
                                        <input type="checkbox" name="type$i" class="checkbox" value="2" checked="checked" />
                                        相关
                                    </label>
                                    <label class="checkbox">
                                        <input type="checkbox" name="type$i" class="checkbox" value="3" checked="checked" />
                                        使用
                                    </label>
                                    <label class="checkbox">
                                        <input type="checkbox" name="type$i" class="checkbox" value="4" checked="checked" />
                                        对比
                                    </label>
                                    <label class="checkbox">
                                        <input type="checkbox" name="type$i" class="checkbox" value="5" checked="checked" />
                                        不确定
                                    </label>
                                </div>
                            </li>
                            #end
                    </ul>
                </div>
            </div>
        </div>
        <div class="submit">
            <button class="btn btn-block btn-primary" type="submit" style="display: inline-block;margin-left: 235px;">确认修改</button>
            <button class="btn btn-block btn-primary" style="display: inline-block;margin-left: 50px;">取消</button>
        </div>
        </form>
    </div>
</div>
<script>
    #set($citeNum=$citeList.size())
    function add_cite(id,e,literatureid){
        #set($citeNum=$citeNum+1)
        if($("#nonecite")[0].style.display!="none"){
            $("#nonecite")[0].style.display="none";
        }
        $("#"+id).append(
             '<li><a href="#">'+$(e).parent().children('.desc').text()+'</a>'+
                  '<input name="cite$citeNum" type="hidden" value="'+literatureid+'" />'+
                  '<div class="widget-body uniformjs"><label style="margin-right: 4px;">引用关系类型：</label>' +
                  '<label class="checkbox" style="margin-right: 4px;">' +
                  '<div class="checker" id="uniform-undefined"><span><input type="checkbox" name="type$citeNum" class="checkbox" value="1" style="opacity: 0;"></span></div>' +
                  '&nbsp;简单提及</label>'+
                  '<label class="checkbox" style="margin-right: 4px;">'+
                  '<div class="checker" id="uniform-undefined"><span class="checked"><input type="checkbox" name="type$citeNum" class="checkbox" value="2" checked="checked" style="opacity: 0;"></span></div>'+
                  '&nbsp;相关</label>'+
                  '<label class="checkbox" style="margin-right: 4px;">'+
                  '<div class="checker" id="uniform-undefined"><span class="checked"><input type="checkbox" name="type$citeNum" class="checkbox" value="3" checked="checked" style="opacity: 0;"></span></div>'+
                  '&nbsp;使用</label>'+
                  '<label class="checkbox" style="margin-right: 4px;">'+
                  '<div class="checker" id="uniform-undefined"><span class="checked"><input type="checkbox" name="type$citeNum" class="checkbox" value="4" checked="checked" style="opacity: 0;"></span></div>'+
                  '&nbsp;对比</label>'+
                  '<label class="checkbox" style="margin-right: 4px;">'+
                  '<div class="checker" id="uniform-undefined"><span class="checked"><input type="checkbox" name="type$citeNum" class="checkbox" value="5" checked="checked" style="opacity: 0;"></span></div>'+
                  '&nbsp;不确定</label></div></li>'
                  )
    }
    function deleteCite(e){
        $(e).parent().remove();
    }
</script>
<!-- JQuery -->
<script src="../resources/common/theme/scripts/plugins/system/jquery.min.js"></script>

<!-- JQueryUI -->
<script src="../resources/common/theme/scripts/plugins/system/jquery-ui/js/jquery-ui-1.9.2.custom.min.js"></script>
<!-- Bootstrap -->
<script src="../resources/common/bootstrap/js/bootstrap.min.js"></script>
<!-- Common Demo Script -->
<script src="../resources/common/theme/scripts/demo/common.js?1369753442"></script>

<!-- Holder Plugin -->
<script src="../resources/common/theme/scripts/plugins/other/holder/holder.js"></script>
<!-- Bootstrap Extended -->
<script src="../resources/common/bootstrap/extend/bootstrap-select/bootstrap-select.js"></script>
<!-- Uniform Forms Plugin -->
<script src="../resources/common/theme/scripts/plugins/forms/pixelmatrix-uniform/jquery.uniform.min.js"></script>
<script>
    $('.btn-block').click(function(){
        window.open("/listLiterature.html");
    })
</script>
</body>